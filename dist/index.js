var he=Object.create;var E=Object.defineProperty;var pe=Object.getOwnPropertyDescriptor;var ue=Object.getOwnPropertyNames;var fe=Object.getPrototypeOf,be=Object.prototype.hasOwnProperty;var _=(g,e)=>()=>(g&&(e=g(g=0)),e);var D=(g,e)=>()=>(e||g((e={exports:{}}).exports,e),e.exports),B=(g,e)=>{for(var s in e)E(g,s,{get:e[s],enumerable:!0})},me=(g,e,s,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ue(e))!be.call(g,o)&&o!==s&&E(g,o,{get:()=>e[o],enumerable:!(t=pe(e,o))||t.enumerable});return g};var x=(g,e,s)=>(s=g!=null?he(fe(g)):{},me(e||!g||!g.__esModule?E(s,"default",{value:g,enumerable:!0}):s,g));var L=D((He,H)=>{var j=require("fs"),k=require("cli-color");H.exports=class{constructor(e){Object.assign(this,e)}appInfo=e=>{let s=JSON.parse(j.readFileSync("package.json","utf-8"));console.log(`
${s.title} v${s.version} running on Node.js ${process.version}
`),process.argv.pop()=="blockit"&&(console.log(`  builder url:    ${k.magenta("http://localhost:3001")}`),console.log(`  preview url:    ${k.magenta("http://localhost:3000")}
`),console.log(`${this.logTime(new Date)} - Waiting for ${k.cyan("changes...")}`)),e()};logTime=e=>`[${new Intl.DateTimeFormat("en",{hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h24"}).format(e)}]`;errHandler=(e,s)=>{switch(e.name){case s.buildHtml.name:let t=String(e.error).split(" ").slice(5,-5).join(" "),o=String(e.error).split(" ").slice(5)[2];console.log(`${this.logTime(new Date)} - ${t=="The partial"?`HTML compile ${k.red("a problem occurred:")} The partial ${k.yellow(`"${o}"`)} could not be found`:`HTML compile ${k.red("a problem occurred:")} ${e.error}`}`);break;case s.buildCss.name:let a=String(e.error.formatted).split(" ").slice(1,-4).join(" ");console.log(`${this.logTime(new Date)} - CSS compile ${k.red("a problem occurred:")} ${a}`);break;case s.buildJs.name:console.log(`${this.logTime(new Date)} - JS compile ${k.red("a problem occurred:")} ${e.error}`);break;case s.buildStatic.name:console.log(`${this.logTime(new Date)} - Static assets deliver ${k.red("a problem occurred:")} ${e.error}`);break;case s.buildImg.name:console.log(`${this.logTime(new Date)} - Image optimization ${k.red("a problem occurred:")} ${e.error}`);break;case s.name:console.log(`${this.logTime(new Date)} - ${k.red("a problem occurred:")} ${e.error}`);break}};hookSearch=e=>{j.existsSync("../../src/hooks/blog/search-post.hbs")&&j.existsSync("../../src/hooks/blog/search-result.hbs")?(hookSearchWrite("../../src/hooks/blog/search-post.hbs","../../src/hooks/blog/search-result.hbs"),e()):(hookSearchWrite("hooks/blog/search-post.hbs","hooks/blog/search-result.hbs"),e())};hookSearchWrite=(e,s)=>{let t=j.readFileSync(e,"utf8"),o=j.readFileSync(s,"utf8");j.readFile("../../src/assets/js/utilities/blog.js","utf8",(a,n)=>{let l=/(?<=notFoundDiv.innerHTML\s=\s\`)([^`]*)(?=\`)/,c=/(?<=return\s\`)([^`]*)(?=\`)/g,h=n.replace(l,o).replace(c,t);j.writeFileSync("../../src/assets/js/utilities/blog.js",h)})};hookSectionsPreview=()=>this.src("../../src/hooks/sections/previews/*").pipe(this.dest("./views/assets/img/sections"))}});var V=D((Re,U)=>{var Se=require("fs"),P=require("cli-color"),ye=require("./node_modules/del/index.js"),I=require("panini"),O=require("gulp-rename"),A=require("gulp-jsbeautifier"),F=require("gulp-minifier"),R=require("merge-stream"),W=require("gulp-newer"),we=require("gulp-concat"),ke=require("gulp-babel"),Ce=require("gulp-sass")(require("sass")),z=require("gulp-postcss"),$e=require("autoprefixer"),ve=require("postcss-merge-longhand"),je=require("gulp-imagemin"),Fe=require("@fullhuman/postcss-purgecss"),De=L();U.exports=class{constructor(e){Object.assign(this,e),this.utils=new De}reloadPanini=async()=>{await I.refresh()};buildClean=()=>ye(["../../dist/**","../../dist/img/*","!../../dist/blog","!../../dist/blog/data","!../../dist/img","!../../dist/img/user"],{force:!0});buildHtml=()=>{let e=JSON.parse(Se.readFileSync("../../src/data/setting.json","utf-8")).optimization.minifyAssets.html;return this.reloadPanini(),this.src("../../src/pages/**/*.hbs").pipe(I({root:"../../src/pages",layouts:"../../src/layouts",partials:"../../src/partials",data:"../../src/data",helpers:"./helpers"})).pipe(O(s=>s.extname=".html")).pipe(A({html:{file_types:[".html"],max_preserve_newlines:0,preserve_newlines:!0}})).pipe(F(e?{minify:!0,minifyHTML:{collapseWhitespace:!0,removeComments:!0}}:{minify:!1})).pipe(this.dest("../../dist")).on("end",()=>console.log(`${this.utils.logTime(new Date)} - HTML compiled ${P.green("successfully.")}`))};buildCss=()=>this.src("../../src/assets/scss/main.scss").pipe(Ce()).pipe(O("style.css")).pipe(A({css:{file_types:[".css"]}})).pipe(z([$e(),ve()])).pipe(this.dest("../../dist/css")).on("end",()=>console.log(`${this.utils.logTime(new Date)} - CSS compiled ${P.green("successfully.")}`));buildJs=()=>R(this.src("../../src/assets/js/*.js").pipe(A({js:{file_types:[".js"]}})).pipe(this.dest("../../dist/js")),this.src("../../src/assets/js/utilities/*.js").pipe(W("../../dist/js/vendors/utilities.min.js")).pipe(ke({presets:[["@babel/preset-env",{targets:"> 0.25%, not dead",exclude:["babel-plugin-transform-async-to-generator","babel-plugin-transform-regenerator"]}]]})).pipe(we("utilities.min.js",{newLine:`\r
\r
`})).pipe(F({minify:!0,minifyJS:{sourceMap:!1}})).pipe(this.dest("../../dist/js")),this.src("../../src/assets/js/vendors/*.js").pipe(F({minify:!0,minifyJS:{sourceMap:!1}})).pipe(this.dest("../../dist/js/vendors")).on("end",()=>console.log(`${this.utils.logTime(new Date)} - JS compiled ${P.green("successfully.")}`)));buildImg=()=>this.src("../../src/assets/img/**/*").pipe(W("../../dist/img")).pipe(je([gifsicle({interlaced:!0}),mozjpeg({quality:80,progressive:!0}),optipng({optimizationLevel:5}),svgo({plugins:[{name:"removeViewBox",active:!0},{name:"cleanupIDs",active:!1}]})],{verbose:!1,silent:!0})).pipe(this.dest("../../dist/img")).on("end",()=>console.log(`${this.utils.logTime(new Date)} - Images optimized ${P.green("successfully.")}`));buildStatic=()=>R(this.src("../../src/assets/fonts/*").pipe(this.dest("../../dist/fonts")),this.src(["../../node_modules/@fortawesome/fontawesome-free/webfonts/fa-brands-400.ttf","../../node_modules/@fortawesome/fontawesome-free/webfonts/fa-brands-400.woff2","../../node_modules/@fortawesome/fontawesome-free/webfonts/fa-solid-900.ttf","../../node_modules/@fortawesome/fontawesome-free/webfonts/fa-solid-900.woff2"]).pipe(this.dest("../../dist/fonts")),this.src("../../src/assets/favicon/favicon.ico").pipe(this.dest("../../dist/img")),this.src("../../src/assets/favicon/apple-touch-icon.png").pipe(this.dest("../../dist/img")),this.src("../../src/assets/php/sendmail.php").pipe(this.dest("../../dist")),this.src("../../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js").pipe(F({minify:!0,minifyJS:{sourceMap:!1}})).pipe(O("bootstrap.min.js")).pipe(this.dest("../../dist/js/vendors")),this.src("../../node_modules/isotope-layout/dist/isotope.pkgd.min.js").pipe(O("isotope.min.js")).pipe(this.dest("../../dist/js/vendors")),this.src("../../node_modules/bigger-picture/dist/bigger-picture.min.js").pipe(this.dest("../../dist/js/vendors")).on("end",()=>console.log(`${this.utils.logTime(new Date)} - Static assets delivered ${P.green("successfully.")}`)));minifyCss=()=>this.src("../../dist/css/*.css").pipe(z([Fe({content:["../../dist/*.html","../../dist/js/**/*.js"],safelist:{standard:[/@s$/,/@m$/]}})])).pipe(F({minify:!0,minifyCSS:!0})).pipe(this.dest("../../dist/css"));minifyJs=()=>this.src("../../src/assets/js/*.js").pipe(F({minify:!0,minifyJS:{sourceMap:!1}})).pipe(this.dest("../../dist/js"));blockitWatch=()=>{this.watch("../../src/assets/scss/**/*.scss",this.series(this.buildCss)),this.watch("../../src/assets/js/**/*.js",this.series(this.buildJs)),this.watch("../../src/assets/img/**/*",this.series(this.buildImg)),this.watch(["../../src/**/*.hbs","../../src/data/**/*.json"],this.series(this.buildHtml)),this.watch(["../../src/hooks/blog/search-post.hbs","../../src/hooks/blog/search-result.hbs"],this.series(this.utils.hookSearch)),this.watch("../../src/hooks/sections/previews/*",this.series(this.utils.hookSectionsPreview))}}});var Y={};B(Y,{default:()=>xe});var J,G,Pe,xe,K=_(()=>{J=x(require("fs")),G=require("jsdom"),Pe=()=>{let e=JSON.parse(J.default.readFileSync("../../src/data/component.json","utf8")).socialMedia.filter(s=>Object.values(s)[0].length!==0).map(s=>{switch(Object.keys(s)[0]){case"facebook":return`	<div><a href="${Object.values(s)[0]}" class="color-facebook text-decoration-none"><i class="fab fa-facebook-square"></i> Facebook</a></div>`;case"twitter":return`	<div><a href="${Object.values(s)[0]}" class="color-twitter text-decoration-none"><i class="fab fa-twitter"></i> Twitter</a></div>`;case"instagram":return`	<div><a href="${Object.values(s)[0]}" class="color-instagram text-decoration-none"><i class="fab fa-instagram"></i> Instagram</a></div>`;case"linkedin":return`	<div><a href="${Object.values(s)[0]}" class="color-linkedin text-decoration-none"><i class="fab fa-linkedin"></i> Linkedin</a></div>`;case"behance":return`	<div><a href="${Object.values(s)[0]}" class="color-behance text-decoration-none"><i class="fab fa-behance"></i> Behance</a></div>`;case"whatsapp":return`	<div><a href="${Object.values(s)[0]}" class="color-whatsapp text-decoration-none"><i class="fab fa-whatsapp"></i> Whatsapp</a></div>`;case"telegram":return`	<div><a href="${Object.values(s)[0]}" class="color-telegram text-decoration-none"><i class="fab fa-telegram-plane"></i> Telegram</a></div>`;case"youtube":return`	<div><a href="${Object.values(s)[0]}" class="color-youtube text-decoration-none"><i class="fab fa-youtube"></i> Youtube</a></div>`}}).join(`
`);J.default.readFile("../../src/partials/components/component-social-media.hbs","utf8",(s,t)=>{let o=t.split(`
`)[0],a=new G.JSDOM(t),n=a.window.document.querySelector(".social-media-list")!==null?a.window.document.querySelector(".social-media-list"):!1;n&&(n.innerHTML=`
${e}
`);let l=o.concat(`
`,a.window.document.documentElement.childNodes[1].innerHTML);J.default.writeFileSync("../../src/partials/components/component-social-media.hbs",l)})},xe=Pe});var X={};B(X,{default:()=>Je});var T,Q,Oe,Je,Z=_(()=>{T=x(require("fs")),Q=require("jsdom"),Oe=()=>{let g=JSON.parse(T.default.readFileSync("../../src/data/component.json","utf8")).footer;T.default.readFile("../../src/partials/components/component-footer.hbs","utf8",(e,s)=>{let t=s.split(`
`)[0],o=new Q.JSDOM(s),a=o.window.document.querySelector(".copyright-text"),n=o.window.document.querySelector(".footer-logo");g.siteLogo.enabled?(n.children[0].classList.add("d-lg-inline-block"),n.children[0].classList.remove("d-none"),n.children[0].setAttribute("src",`{{root}}${g.siteLogo.logo.src}`),n.children[0].setAttribute("width",g.siteLogo.logo.width),n.children[0].setAttribute("height",g.siteLogo.logo.height)):(n.children[0].classList.add("d-none"),n.children[0].classList.remove("d-lg-inline-block")),a.innerHTML=g.copyrightText;let l=o.window.document.documentElement.childNodes[1].innerHTML.replace(/&gt;/g,">"),c=t.concat(`
`,l);T.default.writeFileSync("../../src/partials/components/component-footer.hbs",c)})},Je=Oe});var se=D((ze,ee)=>{var i=require("fs"),{execSync:N}=require("child_process"),{JSDOM:Te}=require("jsdom");ee.exports=class{constructor(e){this.socket=e}createDashboardData=()=>{let e={name:JSON.parse(i.readFileSync("./package.json","utf-8")).title,version:JSON.parse(i.readFileSync("./package.json","utf-8")).version,theme:process.env.npm_package_title,pages:i.readdirSync("../../src/pages","utf8").filter(s=>s.match(/.(hbs)$/i)).filter(s=>!s.match(/blog-page/g)&&!s.match(/blog-find/g)).length,posts:i.readdirSync("../../src/data/blog/posts","utf8").length,authors:JSON.parse(i.readFileSync("../../src/data/setting.json","utf8")).authors.length};this.socket.emit("dashboardData",e)};createPagesData=()=>{i.readdir("../../src/pages",(e,s)=>{let t=s.filter(o=>o.match(/.(hbs)$/i)).filter(o=>!o.match(/blog-page/g)&&!o.match(/blog-find/g)).map(o=>({page:o.split(".").slice(0,-1).join("."),title:i.readFileSync(`../../src/pages/${o}`,"utf8").match(/(?<=title:\s).*/g)[0],date:i.statSync(`../../src/pages/${o}`).mtime,layout:i.readFileSync(`../../src/pages/${o}`,"utf8").match(/(?<=layout:\s).*/g)[0],breadcrumb:i.readFileSync(`../../src/pages/${o}`,"utf8").match(/(?<=breadcrumb:\s).*/g)[0],sections:i.readFileSync(`../../src/pages/${o}`,"utf8").match(/{{>(.*?)}}*/g).map(a=>a.substring(4).slice(0,-3))}));this.socket.emit("pagesData",t)}),i.readFile("../../src/data/setting.json","utf8",(e,s)=>{let t=JSON.parse(s).blog.asBlog!==!1?JSON.parse(s).blog.asBlog.split(".")[0]:!1;this.socket.emit("pagesCurrentBlog",t)})};createPagesActionData=()=>{i.readdir("templates",(e,s)=>{let t=s.filter(r=>r.match(/.(hbs)$/i)),o=i.readdirSync("../../src/hooks/sections","utf-8").filter(r=>!r.includes("blog")).filter(r=>r.match(/.(hbs)$/i)),a=this.utilCheckHook()&&o.length!==0?o:!1,l={name:`Exclusive - ${a!==!1?a[0].split("-")[1].charAt(0).toUpperCase()+a[0].split("-")[1].slice(1):"empty"}`,sections:a,icon:"fa-award"},c=[{name:"Card",sections:t.filter(r=>r.includes("card")),icon:"fa-sticky-note"},{name:"Client logo",sections:t.filter(r=>r.includes("client-logo")),icon:"fa-shapes"},{name:"Contact",sections:t.filter(r=>r.includes("contact")),icon:"fa-map-marker-alt"},{name:"Content",sections:t.filter(r=>r.includes("content")),icon:"fa-file-alt"},{name:"Counter",sections:t.filter(r=>r.includes("counter")),icon:"fa-hourglass-half"},{name:"Faq",sections:t.filter(r=>r.includes("faq")),icon:"fa-question"},{name:"Feature",sections:t.filter(r=>r.includes("feature")),icon:"fa-cubes"},{name:"Gallery",sections:t.filter(r=>r.includes("gallery")),icon:"fa-images"},{name:"Pricing",sections:t.filter(r=>r.includes("pricing")),icon:"fa-money-bill-wave"},{name:"Slideshow",sections:t.filter(r=>r.includes("slideshow")),icon:"fa-layer-group"},{name:"Team",sections:t.filter(r=>r.includes("team")),icon:"fa-users"},{name:"Testimonial",sections:t.filter(r=>r.includes("testimonial")),icon:"fa-comment-dots"},{name:"Timeline",sections:t.filter(r=>r.includes("timeline")),icon:"fa-history"},{name:"Utility",sections:t.filter(r=>r.includes("utility")),icon:"fa-screwdriver-wrench"}];a!==!1&&c.splice(5,0,l),this.socket.emit("pagesActionData",c)})};pagesDeletePage=(e,s)=>{i.readFile(`../../src/pages/${e}.hbs`,"utf8",(t,o)=>{o.match(/(?<=as_blog:\s).*/g)[0]=="false"?(i.unlinkSync(`../../dist/${e}.html`),i.unlinkSync(`../../src/pages/${e}.hbs`),s!==void 0&&s.forEach(n=>!n.includes("section-slideshow")&&i.unlinkSync(`../../src/partials/sections/${n}.hbs`))):(i.unlinkSync(`../../dist/${e}.html`),i.unlinkSync(`../../src/pages/${e}.hbs`),i.unlinkSync("../../dist/blog-find.html"),i.unlinkSync("../../src/pages/blog-find.hbs"),i.readdir("../../src/pages",(n,l)=>{l.filter(c=>c.match(/.(hbs)$/i)).filter(c=>c.match(/blog-page/g)).forEach(c=>{i.unlinkSync(`../../dist/${c.split(".").slice(0,-1)[0]}.html`),i.unlinkSync(`../../src/pages/${c}`)})}),i.readFile("../../src/data/setting.json","utf8",(n,l)=>{let c=JSON.parse(l);c.blog.asBlog=!1,i.writeFileSync("../../src/data/setting.json",JSON.stringify(c,null,2)),this.socket.emit("pagesCurrentBlog",c.blog.asBlog)}),i.readFile("../../src/assets/js/utilities/breadcrumb.js","utf8",(n,l)=>{let c=l.replace(/(?<=this\.blogPath\s\=\s).*/g,!1);i.writeFileSync("../../src/assets/js/utilities/breadcrumb.js",c)}),i.readFile("../../src/assets/js/utilities/active-menu.js","utf8",(n,l)=>{let c=l.replace(/(?<=this\.blogPath\s\=\s).*/g,!1);i.writeFileSync("../../src/assets/js/utilities/active-menu.js",c)}))})};pagesSavePage=(e,s,t)=>{s?i.readFile("../../src/data/setting.json","utf8",(o,a)=>{let n=JSON.parse(a);n.blog.asBlog=`${e}.hbs`,i.writeFileSync("../../src/data/setting.json",JSON.stringify(n,null,2)),i.readFile("../../src/assets/js/utilities/breadcrumb.js","utf8",(r,h)=>{let f=h.replace(/(?<=this\.blogPath\s\=\s).*/g,`'${e}.html'`);i.writeFileSync("../../src/assets/js/utilities/breadcrumb.js",f)}),i.readFile("../../src/assets/js/utilities/active-menu.js","utf8",(r,h)=>{let f=h.replace(/(?<=this\.blogPath\s\=\s).*/g,`'${e}.html'`);i.writeFileSync("../../src/assets/js/utilities/active-menu.js",f)});function l(r){let S=i.readFileSync(r,"utf8").replace(/(?<=layout:\s).*/g,t.layout).replace(/(?<=title:\s).*/g,t.title).replace(/(?<=breadcrumb:\s).*/g,t.breadcrumb);i.writeFileSync(r,S)}i.existsSync("../../src/hooks/pages/blog.hbs")?l("../../src/hooks/pages/blog.hbs"):l("hooks/pages/blog.hbs"),i.existsSync("../../src/hooks/pages/blog-single.hbs")?l("../../src/hooks/pages/blog-single.hbs"):l("hooks/pages/blog-single.hbs"),i.existsSync("../../src/hooks/pages/blog-find.hbs")?l("../../src/hooks/pages/blog-find.hbs"):l("hooks/pages/blog-find.hbs"),i.readdir("../../src/pages/blog",(r,h)=>{h.forEach(f=>l(`../../src/pages/blog/${f}`))}),i.readFile("../../src/data/blog/blog.json","utf8",(r,h)=>{let f=JSON.parse(h),m={defaultPage:i.existsSync("../../src/hooks/pages/blog.hbs")?i.readFileSync("../../src/hooks/pages/blog.hbs","utf8"):i.readFileSync("hooks/pages/blog.hbs","utf8"),singlePage:i.existsSync("../../src/hooks/pages/blog-single.hbs")?i.readFileSync("../../src/hooks/pages/blog-single.hbs","utf8"):i.readFileSync("hooks/pages/blog-single.hbs","utf8"),defaultSection:i.existsSync("../../src/hooks/sections/section-blog.hbs")?i.readFileSync("../../src/hooks/sections/section-blog.hbs","utf8"):i.readFileSync("hooks/sections/section-blog.hbs","utf8"),singleSection:i.existsSync("../../src/hooks/sections/section-blog-single.hbs")?i.readFileSync("../../src/hooks/sections/section-blog-single.hbs","utf8"):i.readFileSync("hooks/sections/section-blog-single.hbs","utf8")};this.postPaginatorPage(f,m)});let c=i.existsSync("../../src/hooks/pages/blog-find.hbs")?"../../src/hooks/pages/blog-find.hbs":"hooks/pages/blog-find.hbs";i.readFile(c,"utf8",(r,h)=>{let S=h.replace(/(?<=layout:\s).*/g,t.layout).replace(/(?<=title:\s).*/g,t.title).replace(/(?<=breadcrumb:\s).*/g,t.breadcrumb);i.writeFileSync("../../src/pages/blog-find.hbs",S)})}):i.writeFileSync(`../../src/pages/${e}.hbs`,t)};readSectionData=e=>{let s=e.split("-").length>=4?`../../src/partials/sections/${e}.hbs`:`templates/${e}.hbs`;i.readFile(s,"utf8",(t,o)=>{let a={blocks:[{id:e,type:"code",data:{language:"HTML",text:o}}]};this.socket.emit("resultSectionData",a)})};createSectionData=(e,s)=>{e.forEach(t=>{i.readFile(`templates/${t.reference}.hbs`,"utf8",(o,a)=>{a.includes("<!-- slideshow content begin -->")?i.writeFileSync(`../../src/partials/sections/${t.reference}.hbs`,t.updateData!==!1?t.updateData:a):i.writeFileSync(`../../src/partials/sections/${t.reference}-${t.id}.hbs`,t.updateData!==!1?t.updateData:a)})}),(s.length!==0||s[0]!==!1)&&s.forEach(t=>{try{i.existsSync(`../../src/partials/sections/${t}.hbs`)&&i.unlinkSync(`../../src/partials/sections/${t}.hbs`)}catch(o){console.error(`file not found: ${o}`)}})};createPostsData=()=>{i.readdir("../../src/data/blog/posts",(e,s)=>{let t=s.map(o=>{let a=JSON.parse(i.readFileSync(`../../src/data/blog/posts/${o}`,"utf8"));return{title:a.title,link:a.link,dateCreated:a.dateCreated,dateModified:a.dateModified,timeCreated:a.timeCreated,timeModified:a.timeModified,author:a.author,category:a.category}});this.socket.emit("postsData",t)})};createPostsActionData=e=>{let s=JSON.parse(i.readFileSync("../../src/data/setting.json","utf8")),t=e!=="empty"?JSON.parse(i.readFileSync(`../../src/data/blog/posts/${e}.json`,"utf8")):null,o={authors:{current:t!==null?t.author.name:"",select:s.authors},categories:{current:t!==null?t.category:"",select:s.blog.categories},currentTags:t!==null?t.tags:"",currentImage:t!==null?t.image:!1,title:t!==null?t.title:"",dateCreated:t!==null?t.dateCreated:"",timeCreated:t!==null?t.timeCreated:"",blocks:t!==null?t.blocks:""};this.socket.emit("postsActionData",o)};postPaginatorWidget=(e,s,t,o)=>{let a=s||1,n=t||10,l=(a-1)*n,c=e.slice(l).slice(0,t),r=Math.ceil(e.length/n);return{page:a,per_page:n,prev_page:a-1?a-1:null,next_page:r>a?a+1:null,total_post:e.length,total_pages:r,display_author:o.blog.displayAuthor,data:c}};postPaginatorPage=(e,s)=>{let t=JSON.parse(i.readFileSync("../../src/data/setting.json","utf8"));setTimeout(()=>{let o=t.blog.postPerPage,n=this.postPaginatorWidget(e.post,1,o,t).total_pages;if(t.blog.asBlog!==!1){let d=1;for(;d<=n;){let u=`blog-page-${d}`,$=this.postPaginatorWidget(e.post,d,o,t);i.writeFileSync(`../../src/data/blog/${u}.json`,JSON.stringify($,null,2));let b=s.defaultPage.replace(/(?<={{> section-blog-)(.*?)(?= }})/g,d);d==1?i.writeFileSync(`../../src/pages/${t.blog.asBlog}`,b):i.writeFileSync(`../../src/pages/blog-page-${d}.hbs`,b);let C=s.defaultSection.replace(/{{#each(.*?).data}}/g,`{{#each blog-page-${d}.data}}`).replace(/{{#if(.*?).display_author}}/g,`{{#if @root.blog-page-${d}.display_author}}`);i.writeFileSync(`../../src/partials/blog/section-blog-${d}.hbs`,C),d++}}i.readdir("../../src/data/blog",(d,u)=>{let $=u.filter(C=>C.match(/(blog-page-)/g)),b=n+1,p=$.length;for(;b<=p;)i.existsSync(`../../src/data/blog/blog-page-${b}.json`)&&i.unlinkSync(`../../src/data/blog/blog-page-${b}.json`),i.existsSync(`../../src/pages/blog-page-${b}.hbs`)&&i.unlinkSync(`../../src/pages/blog-page-${b}.hbs`),i.existsSync(`../../dist/blog-page-${b}.html`)&&i.unlinkSync(`../../dist/blog-page-${b}.html`),b++}),i.readdir("../../src/partials/blog",(d,u)=>{let $=u.filter(p=>p.match(/section-blog/g)).sort((p,C)=>p.length-C.length).filter((p,C)=>C<n);u.filter(p=>p.match(/section-blog/g)).filter(p=>!$.includes(p)).forEach(p=>{i.existsSync(`../../src/partials/blog/${p}`)&&i.unlinkSync(`../../src/partials/blog/${p}`)})});let l=[];for(let d=0;d<3;d++)l.push({title:e.post[d].title,link:e.post[d].link,date:e.post[d].dateCreated});let r=e.post.map(d=>d.tags).filter(d=>d).reduce((d,u)=>d.concat(u),[]).map(d=>d),h=r.filter((d,u)=>r.indexOf(d)==u),f=e.post.map(d=>d.category),m=f.filter((d,u)=>f.indexOf(d)==u),w={asBlog:t.blog.asBlog!==!1?`${t.blog.asBlog.split(".").slice(0,-1)}.html`:!1,totalPages:n,tagLists:h,latestPost:l};i.writeFileSync("../../dist/blog/data/data-blog.json",JSON.stringify(w)),i.readFile("../../src/data/blog/blog.json","utf8",(d,u)=>{let $=JSON.parse(u),b=m.map(p=>this.createCategoryPost($.post,p));i.writeFileSync("../../dist/blog/data/data-category.json",JSON.stringify(b))}),i.readFile("../../src/data/blog/blog.json","utf8",(d,u)=>{let $=JSON.parse(u),b=h.map(p=>this.createTagPost($.post,p));b.forEach(p=>{p.posts.forEach(C=>{delete C.tags,delete C.blocks})}),i.writeFileSync("../../dist/blog/data/data-tag.json",JSON.stringify(b))})},600)};createCategoryPost=(e,s)=>{let t=e.filter(o=>o.category===s);return t.forEach(o=>{o.content=this.utilTrimString(o.blocks[0].data.text),o.date=o.dateCreated,delete o.author.id,delete o.blocks,delete o.share,delete o.category,delete o.tags,delete o.dateCreated,delete o.timeCreated,o.image||delete o.image}),{category:s,totalPost:t.length,posts:t}};createTagPost=(e,s)=>{let t=[];return e.forEach(o=>{o.tags.filter(a=>{a===s&&t.push(o)})}),t.forEach(o=>{o.content=this.utilTrimString(o.blocks[0].data.text),o.date=o.dateCreated!==void 0?o.dateCreated:o.date,delete o.author.id,delete o.share,delete o.dateCreated,delete o.timeCreated,o.image||delete o.image}),{tag:s,totalPost:t.length,posts:t}};postCreatePage=e=>{i.readdir("../../src/data/blog/posts",(s,t)=>{let o={post:t.map(a=>JSON.parse(i.readFileSync(`../../src/data/blog/posts/${a}`,"utf8")))};o.post.sort((a,n)=>new Date(`${n.dateCreated} ${n.timeCreated}`)-new Date(`${a.dateCreated} ${a.timeCreated}`)),i.readFile("../../src/data/blog/blog.json","utf-8",(a,n)=>{let l=JSON.parse(n).post.map(r=>(delete r.dateModified,delete r.timeModified,r)),c=o.post.map(r=>(delete r.dateModified,delete r.timeModified,r));JSON.stringify(l)!==JSON.stringify(c)&&i.writeFileSync("../../src/data/blog/blog.json",JSON.stringify(o,null,2))}),this.postPaginatorPage(o,e)})};postsSaveContent=async(e,s,t)=>{i.unlink("../../dist/blog/*.html",o=>{i.writeFileSync(`../../src/data/blog/posts/${e}.json`,JSON.stringify(s,null,2));let a=t.singleSection.replace(/(post-title)/g,e);i.writeFileSync(`../../src/partials/blog/post-title-${e}.hbs`,a);let n=t.singlePage.replace(/(?<={{> post-title)(.*?)(?= }})/g,`-${e}`);i.writeFileSync(`../../src/pages/blog/${e}.hbs`,n),this.postCreatePage(t)})};postsDeletePost=(e,s)=>{let t=[`../../src/data/blog/posts/${e}.json`,`../../src/pages/blog/${e}.hbs`,`../../src/partials/blog/post-title-${e}.hbs`,`../../dist/blog/${e}.html`];return Promise.all(t.map(o=>{i.unlinkSync(o)})).then(this.socket.emit("deleteDone","success"),this.postCreatePage(s))};createEditorData=e=>{i.readFile(`../../src/data/blog/posts/${e}.json`,"utf8",(s,t)=>this.socket.emit("editorData",t))};postsTagSources=()=>{let e={defaultPage:i.existsSync("../../src/hooks/pages/blog.hbs")?i.readFileSync("../../src/hooks/pages/blog.hbs","utf8"):i.readFileSync("hooks/pages/blog.hbs","utf8"),singlePage:i.existsSync("../../src/hooks/pages/blog-single.hbs")?i.readFileSync("../../src/hooks/pages/blog-single.hbs","utf8"):i.readFileSync("hooks/pages/blog-single.hbs","utf8"),defaultSection:i.existsSync("../../src/hooks/sections/section-blog.hbs")?i.readFileSync("../../src/hooks/sections/section-blog.hbs","utf8"):i.readFileSync("hooks/sections/section-blog.hbs","utf8"),singleSection:i.existsSync("../../src/hooks/sections/section-blog-single.hbs")?i.readFileSync("../../src/hooks/sections/section-blog-single.hbs","utf8"):i.readFileSync("hooks/sections/section-blog-single.hbs","utf8")};this.socket.emit("tagSourcesData",e)};findBlogTitle=(e,s,t)=>{if(e.hasOwnProperty(s)&&e[s]===t)return e;for(let o of Object.keys(e))if(typeof e[o]=="object"){let a=this.findBlogTitle(e[o],s,t);if(a!==null&&typeof a<"u")return a}return null};createBlogTitle=e=>{if(this.findBlogTitle(e,"link","blog/page-1.html")!==null){let s=this.findBlogTitle(e,"link","blog/page-1.html").title;i.readdir("../../src/pages/blog",(t,o)=>{o.forEach(a=>{i.readFile(`../../src/pages/blog/${a}`,"utf8",(n,l)=>{let r=l.replace(/(?<=data-title=")([^"]*)/g,s.toLowerCase()).replace(/(?<=title:\s).*/g,s);i.writeFileSync(`../../src/pages/blog/${a}`,r)})})})}};createNavigationData=()=>{let e={nav:JSON.parse(i.readFileSync("../../src/data/navigation.json","utf8")).nav,select:i.readdirSync("../../src/pages","utf8").filter(s=>!s.match(/blog-page/g)&&!s.match(/blog-find/g)).filter(s=>s.match(/.(hbs)$/i))};this.socket.emit("navigationData",e)};saveNavigationData=e=>{i.writeFileSync("../../src/data/navigation.json",JSON.stringify(e,null,2)),this.createBlogTitle(e)};assetsUpload=(e,s)=>{i.writeFile(`../../dist/img/user/${s}`,e,t=>{this.socket.emit("uploadDone",`img/user/${s}`)})};assetsDelete=e=>{i.unlink(`../../dist/img/user/${e}`,s=>{this.socket.emit("deleteDone","success")})};saveSettingsData=(e,s)=>{i.readFile("../../src/assets/scss/_colors.scss","utf8",(t,o)=>{let a=o,u=a.replace(/(?<=primary:\s)([^;]*)/g,e.colors.primaryColor).replace(/(?<=secondary:\s)([^;]*)/g,e.colors.secondaryColor).replace(/(?<=success:\s)([^;]*)/g,e.colors.successColor).replace(/(?<=info:\s)([^;]*)/g,e.colors.infoColor).replace(/(?<=warning:\s)([^;]*)/g,e.colors.warningColor).replace(/(?<=danger:\s)([^;]*)/g,e.colors.dangerColor).replace(/(?<=light:\s)([^;]*)/g,e.colors.lightColor).replace(/(?<=dark:\s)([^;]*)/g,e.colors.darkColor).replace(/(?<=body-bg:\s)([^;]*)/g,e.colors.backgroundColor).replace(/(?<=body-color:\s)([^;]*)/g,e.colors.textColor).replace(/(?<=link-color:\s)([^;]*)/g,e.colors.linkColor);a!==u&&i.writeFileSync("../../src/assets/scss/_colors.scss",u)}),i.readFile("../../src/data/setting.json","utf-8",(t,o)=>{o!==JSON.stringify(e,null,2)&&i.writeFileSync("../../src/data/setting.json",JSON.stringify(e,null,2)),this.postCreatePage(s),this.updateAuthorData(o,e,s),this.runMinifying(o,e)})};runMinifying=(e,s)=>{let t=s.optimization.minifyAssets.css,o=s.optimization.minifyAssets.js,a=JSON.parse(e).optimization.minifyAssets.css!==t,n=JSON.parse(e).optimization.minifyAssets.js!==o;a&&t?N("gulp -S --f index.js minifyCss"):a&&!t&&N("gulp -S --f index.js compileCss"),n&&o?N("gulp -S --f index.js minifyJs"):n&&!o&&N("gulp -S --f index.js compileJs")};saveEmail=e=>{i.readFile("../../dist/sendmail.php","utf8",(s,t)=>{if(String(t.match(/(?<=emailTo = ).*/g))!==`"${e}";`){let a=t.replace(/(?<=emailTo = ).*/g,`"${e}";`);i.writeFileSync("../../dist/sendmail.php",a)}})};saveMap=e=>{i.readdir("../../src/partials/sections",(s,t)=>{t.filter(a=>a.match(/section-contact/g)).forEach(a=>{i.readFile(`../../src/partials/sections/${a}`,"utf8",(n,l)=>{let c=l.split(`
`)[0],r=new Te(l),h=r.window.document.querySelector("iframe");if(h!==null){h.src=e;let f=c.concat(`
`,r.window.document.documentElement.childNodes[1].innerHTML);i.writeFileSync(`../../src/partials/sections/${a}`,f)}})})})};saveSocialMedia=()=>{i.existsSync("../src/hooks/components/social-media.js")?import("../../src/hooks/components/social-media.js").then(e=>e.default()):Promise.resolve().then(()=>(K(),Y)).then(e=>e.default())};saveFooter=()=>{i.existsSync("../src/hooks/components/footer.js")?import("../../src/hooks/components/footer.js").then(e=>e.default()):Promise.resolve().then(()=>(Z(),X)).then(e=>e.default())};saveSlideshow=e=>{let s=i.readFileSync("hooks/slideshow/slideshow-wrapper.hbs","utf8");i.existsSync("../src/hooks/slideshow/slideshow-wrapper.hbs")&&(s=i.readFileSync("../src/hooks/slideshow/slideshow-wrapper.hbs","utf8"));let t=["section-slideshow-1.hbs","section-slideshow-2.hbs","section-slideshow-3.hbs","section-slideshow-4.hbs"],o=e.map((n,l)=>n.slides.length!==0?l:!1).filter(n=>n!==!1).map(n=>`section-slideshow-${n+1}.hbs`),a=t.filter(n=>!o.includes(n));e.forEach((n,l)=>{if(n.slides.length!==0){let c=n.slides.map(h=>h.text),r=s.replace(/\{{(.*slide-id)\}}/g,c.join(" "));i.writeFileSync(`templates/section-slideshow-${l+1}.hbs`,r),i.writeFileSync(`../../src/partials/sections/section-slideshow-${l+1}.hbs`,r)}}),i.readdir("templates",(n,l)=>{l.filter(c=>a.includes(c)).forEach(c=>{i.unlinkSync(`templates/${c}`),i.unlinkSync(`../../src/partials/sections/${c}`)})})};createSettingsData=()=>{i.readFile("../../src/data/setting.json","utf8",(e,s)=>this.socket.emit("settingsData",JSON.parse(s)))};createFooterData=()=>{i.readFile("../src/partials/components/component-footer.hbs","utf8",(e,s)=>{let t={blocks:[{id:"footer-content",type:"code",data:{language:"HTML",text:s}}]};this.socket.emit("footerData",t)})};saveFooterEditor=e=>{Object.keys(e).length!==0&&i.writeFileSync("../src/partials/components/component-footer.hbs",e)};createSlideItem=e=>{i.existsSync("../src/hooks/slideshow/slideshow-item.hbs")?this.createSlideData("../src/hooks/slideshow/slideshow-item.hbs",e):this.createSlideData("hooks/slideshow/slideshow-item.hbs",e)};createSlideData=(e,s)=>{i.readFile(e,"utf8",(t,o)=>{let a={blocks:[{id:s,type:"code",data:{language:"HTML",text:o}}]};this.socket.emit("slideItem",a)})};createComponentsData=()=>{i.readFile("../../src/data/component.json","utf8",(e,s)=>this.socket.emit("componentsData",JSON.parse(s)))};updateAuthorData=(e,s,t)=>{let o=JSON.parse(e).authors,a=s.authors,n=o.filter(this.utilCompareObj(a)),l=a.filter(this.utilCompareObj(o)),c=n.concat(l),r={post:[]};i.readdir("../../src/data/blog/posts",(h,f)=>{f.forEach(m=>{let S=JSON.parse(i.readFileSync(`../../src/data/blog/posts/${m}`,"utf8"));c.length!==0&&(Object.values(S).find(w=>{(w.id===c[0].id&&w.name!==c[1].name||w.id===c[0].id&&w.avatar!==c[1].avatar)&&(w.name=c[1].name,w.avatar=c[1].avatar)}),i.writeFileSync(`../../src/data/blog/posts/${m}`,JSON.stringify(S,null,2))),r.post.push(S)}),r.post.sort((m,S)=>new Date(`${S.dateCreated} ${S.timeCreated}`)-new Date(`${m.dateCreated} ${m.timeCreated}`)),i.writeFileSync("../../src/data/blog/blog.json",JSON.stringify(r,null,2)),this.postPaginatorPage(r,t)})};saveComponentsData=e=>{i.writeFileSync("../../src/data/component.json",JSON.stringify(e,null,2)),this.saveEmail(e.contactMap.email),this.saveMap(e.contactMap.mapSrc),this.saveSlideshow(e.slideshow),this.saveFooter(),this.saveSocialMedia()};utilCompareObj=e=>function(s){return e.filter(function(t){return t.name==s.name&&t.email==s.email&&t.role==s.role&&t.avatar==s.avatar}).length==0};utilTrimString(e){let s=e.indexOf(" ",150);return s==-1?e:e.substring(0,s)+" ..."}utilCheckHook(){return i.readdirSync("../../src/hooks","utf-8").length!==0}utilEnvPort=()=>{let e=JSON.parse(i.readFileSync("../../src/hooks/settings/env.json","utf-8"));this.socket.emit("envPortData",e)}}});var ie=D((Ve,te)=>{te.exports=class{constructor(e){this.blockit=e}dashboardSocket=e=>{e.on("getDashboardData",()=>this.blockit.createDashboardData())};pagesSocket=e=>{e.on("getPagesData",()=>this.blockit.createPagesData()),e.on("getPagesActionData",()=>this.blockit.createPagesActionData()),e.on("deletePageData",(s,t)=>this.blockit.pagesDeletePage(s,t)),e.on("savePageActionData",(s,t,o)=>this.blockit.pagesSavePage(s,t,o)),e.on("readSectionData",s=>this.blockit.readSectionData(s)),e.on("saveSectionData",(s,t)=>this.blockit.createSectionData(s,t))};navigationSocket=e=>{e.on("getNavigationData",()=>this.blockit.createNavigationData()),e.on("saveNavigation",s=>this.blockit.saveNavigationData(s))};postsSocket=e=>{e.on("getPostsData",()=>this.blockit.createPostsData()),e.on("deletePostData",(s,t)=>this.blockit.postsDeletePost(s,t)),e.on("getPostsActionData",s=>this.blockit.createPostsActionData(s)),e.on("savePostContent",(s,t,o)=>this.blockit.postsSaveContent(s,t,o)),e.on("getEditorData",s=>this.blockit.createEditorData(s)),e.on("triggerTagSources",()=>this.blockit.postsTagSources())};componentsSocket=e=>{e.on("getComponentsData",s=>this.blockit.createComponentsData()),e.on("saveComponents",s=>this.blockit.saveComponentsData(s)),e.on("getSlideItem",s=>this.blockit.createSlideItem(s))};settingsSocket=e=>{e.on("getSettingsData",s=>{this.blockit.createSettingsData()}),e.on("getFooterData",s=>{this.blockit.createFooterData()}),e.on("saveFooterEditor",s=>{this.blockit.saveFooterEditor(s)}),e.on("saveSettingsData",(s,t)=>{this.blockit.saveSettingsData(s,t)}),e.on("assetsUpload",(s,t)=>{this.blockit.assetsUpload(s,t)}),e.on("assetsDelete",s=>{this.blockit.assetsDelete(s)})}}});var re=D((Ye,ae)=>{var Ne=se(),Me=ie(),oe=require("browser-sync"),qe=require("connect-history-api-fallback");ae.exports=class{constructor(e){this.preview=oe.create(),this.builder=oe.create(),this.compiler=e}run=()=>{this.preview.init({port:3e3,ui:!1,notify:!1,watch:!0,open:!1,server:"../../dist",cors:!0,reloadDebounce:800,callbacks:{ready:(e,s)=>{s.addMiddleware("*",(t,o)=>{o.writeHead(302,{location:"/404.html"}),o.end("Redirecting!")}),this.compiler.blockitWatch()}}}),this.builder.init({port:3001,ui:!1,notify:!1,watch:!0,startPath:"dashboard",server:"./app",middleware:[qe()],snippetOptions:{async:!1},logLevel:"silent",callbacks:{ready:(e,s)=>{s.io.sockets.on("connection",t=>{let o=new Ne(t),a=new Me(o);a.dashboardSocket(t),a.pagesSocket(t),a.navigationSocket(t),a.postsSocket(t),a.componentsSocket(t),a.settingsSocket(t)})}}})}}});var{src:ce,dest:le,task:v,watch:de,series:q}=require("./node_modules/gulp/index.js"),ge=require("gulp-task-err-handler"),Ee=V(),Le=re(),Ae=L(),y=new Ee({src:ce,dest:le,task:v,watch:de,series:q}),ne=new Le(y),M=new Ae({src:ce,dest:le,task:v,watch:de,series:q});v("build",ge(q(M.appInfo,y.buildClean,y.buildHtml,y.buildCss,y.buildJs,y.buildStatic,y.buildImg),g=>M.errHandler(g,y)));v("blockit",ge(q(M.appInfo,ne.run),g=>M.errHandler(g,ne.run)));v("compileCss",y.buildCss);v("minifyCss",y.minifyCss);v("compileJs",y.buildJs);v("minifyJs",y.minifyJs);
