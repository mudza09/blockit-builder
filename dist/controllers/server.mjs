import c from"./methods.mjs";import n from"./sockets.mjs";import a from"browser-sync";import s from"connect-history-api-fallback";import*as l from"./compiler.mjs";const d=a.create(),m=a.create(),p=()=>{d.init({port:3e3,ui:!1,notify:!1,watch:!0,open:!1,server:"../../dist",cors:!0,reloadDebounce:800,callbacks:{ready:(i,r)=>{r.addMiddleware("*",(e,t)=>{t.writeHead(302,{location:"/404.html"}),t.end("Redirecting!")}),l.blockitWatch()}}}),m.init({port:3001,ui:!1,notify:!1,watch:!0,startPath:"dashboard",server:"views",middleware:[s()],snippetOptions:{async:!1},logPrefix:"Blockit",logLevel:"silent",callbacks:{ready:(i,r)=>{r.io.sockets.on("connection",e=>{const t=new c(e),o=new n(t);o.dashboardSocket(e),o.pagesSocket(e),o.navigationSocket(e),o.postsSocket(e),o.componentsSocket(e),o.settingsSocket(e)})}}})};export default p;
