var h=`.cdx-list {
    margin: 0;
    padding-left: 40px;
    outline: none;

    &__item {
        padding: 5.5px 0 5.5px 3px;
        line-height: 1.6em;
    }

    &--unordered {
        list-style: disc;
    }

    &--ordered {
        list-style: decimal;
    }

    &-settings {
        display: flex;

        .cdx-settings-button {
            width: 50%;
        }
    }
}
`;document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode(h));var i='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',d='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>';var l=class{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:i,title:"List"}}constructor({data:t,config:e,api:r,readOnly:o}){this._elements={wrapper:null},this.api=r,this.readOnly=o,this.settings=[{name:"unordered",label:this.api.i18n.t("Unordered"),icon:i,default:e.defaultStyle==="unordered"||!1},{name:"ordered",label:this.api.i18n.t("Ordered"),icon:d,default:e.defaultStyle==="ordered"||!0}],this._data={style:this.settings.find(n=>n.default===!0).name,items:[]},this.data=t}render(){return this._elements.wrapper=this.makeMainTag(this._data.style),this._data.items.length?this._data.items.forEach(t=>{this._elements.wrapper.appendChild(this._make("li",this.CSS.item,{innerHTML:t}))}):this._elements.wrapper.appendChild(this._make("li",this.CSS.item)),this.readOnly||this._elements.wrapper.addEventListener("keydown",t=>{let[e,r]=[13,8];switch(t.keyCode){case e:this.getOutofList(t);break;case r:this.backspace(t);break}},!1),this._elements.wrapper}save(){return this.data}static get conversionConfig(){return{export:t=>t.items.join(". "),import:t=>({items:[t],style:"unordered"})}}static get sanitize(){return{style:{},items:{br:!0}}}renderSettings(){return this.settings.map(t=>({...t,isActive:this._data.style===t.name,closeOnActivate:!0,onActivate:()=>this.toggleTune(t.name)}))}onPaste(t){let e=t.detail.data;this.data=this.pasteHandler(e)}static get pasteConfig(){return{tags:["OL","UL","LI"]}}makeMainTag(t){let e=t==="ordered"?this.CSS.wrapperOrdered:this.CSS.wrapperUnordered,r=t==="ordered"?"ol":"ul";return this._make(r,[this.CSS.baseBlock,this.CSS.wrapper,e],{contentEditable:!this.readOnly})}toggleTune(t){let e=this.makeMainTag(t);for(;this._elements.wrapper.hasChildNodes();)e.appendChild(this._elements.wrapper.firstChild);this._elements.wrapper.replaceWith(e),this._elements.wrapper=e,this._data.style=t}get CSS(){return{baseBlock:this.api.styles.block,wrapper:"cdx-list",wrapperOrdered:"cdx-list--ordered",wrapperUnordered:"cdx-list--unordered",item:"cdx-list__item"}}set data(t){t||(t={}),this._data.style=t.style||this.settings.find(r=>r.default===!0).name,this._data.items=t.items||[];let e=this._elements.wrapper;e&&e.parentNode.replaceChild(this.render(),e)}get data(){this._data.items=[];let t=this._elements.wrapper.querySelectorAll(`.${this.CSS.item}`);for(let e=0;e<t.length;e++)t[e].innerHTML.replace("<br>"," ").trim()&&this._data.items.push(t[e].innerHTML);return this._data}_make(t,e=null,r={}){let o=document.createElement(t);Array.isArray(e)?o.classList.add(...e):e&&o.classList.add(e);for(let n in r)o[n]=r[n];return o}get currentItem(){let t=window.getSelection().anchorNode;return t.nodeType!==Node.ELEMENT_NODE&&(t=t.parentNode),t.closest(`.${this.CSS.item}`)}getOutofList(t){let e=this._elements.wrapper.querySelectorAll("."+this.CSS.item);if(e.length<2)return;let r=e[e.length-1],o=this.currentItem;o===r&&!r.textContent.trim().length&&(o.parentElement.removeChild(o),this.api.blocks.insert(),this.api.caret.setToBlock(this.api.blocks.getCurrentBlockIndex()),t.preventDefault(),t.stopPropagation())}backspace(t){let e=this._elements.wrapper.querySelectorAll("."+this.CSS.item),r=e[0];!r||e.length<2&&!r.innerHTML.replace("<br>"," ").trim()&&t.preventDefault()}selectItem(t){t.preventDefault();let e=window.getSelection(),r=e.anchorNode.parentNode,o=r.closest("."+this.CSS.item),n=new Range;n.selectNodeContents(o),e.removeAllRanges(),e.addRange(n)}pasteHandler(t){let{tagName:e}=t,r;switch(e){case"OL":r="ordered";break;case"UL":case"LI":r="unordered"}let o={style:r,items:[]};if(e==="LI")o.items=[t.innerHTML];else{let n=Array.from(t.querySelectorAll("LI"));o.items=n.map(s=>s.innerHTML).filter(s=>!!s.trim())}return o}};export{l as default};
